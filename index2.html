<!DOCTYPE html>
<html>
  <head>
    <title>Recipe Search</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <style>
      body {
        background-color: #f5f5f5;
        font-family: "Arial", sans-serif;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        height: 100vh;
        margin: 0;
      }

      .container {
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 20px;
      }

      .search-container {
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: 20px;
      }

      input[type="text"] {
        width: 200px;
        padding: 10px;
        border-radius: 4px;
        border: 1px solid #ccc;
        margin-right: 10px;
      }

      button {
        background-color: #ff6347; /* Tomato color for a food theme */
        border: 0;
        border-radius: 4px;
        color: #fff;
        font-size: 18px;
        padding: 10px;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }

      button:hover {
        background-color: #ff4733; /* Darker shade of tomato on hover */
      }

      button:active {
        transform: scale(0.98);
      }

      button:focus {
        outline: none;
      }

      .result {
        background-color: #fff;
        display: flex;
        flex-direction: column; /* Updated to column layout */
        align-items: center;
        justify-content: center;
        height: 500px;
        width: 900px;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        margin: 10px;
      }

      .result img {
        object-fit: cover;
        max-height: 70%; /* Adjusted to make room for ready in minutes box */
        max-width: 100%;
      }

      .ready-in {
        background-color: #e0e0e0;
        padding: 10px;
        width: 100%;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="search-container">
        <input id="search" type="text" />
        <button onclick="getRecipe(document.getElementById('search').value)">
          Search
        </button>
      </div>
      <div id="output"></div>
      <button id="sourceButton" onclick="getSource()">Recipe Source</button>
    </div>

    <script>
      function getSource() {
        var recipeId = document.querySelector(".result").dataset.recipeId;
        $.ajax({
          url:
            "https://api.spoonacular.com/recipes/" +
            recipeId +
            "/information?apiKey=83391e00768640b29c383a671ab06380",
          success: function (res) {
            window.open(res.sourceUrl, "_blank");
          },
          error: function (xhr, status, error) {
            console.error("Error fetching recipe source:", error);
          },
        });
      }

      function getRecipe(query) {
        $.ajax({
          url:
            "https://api.spoonacular.com/recipes/search?apiKey=83391e00768640b29c383a671ab06380&query=" +
            query,
          success: function (res) {
            if (res.results.length > 0) {
              var result = res.results[0];
              var outputDiv = document.getElementById("output");
              outputDiv.innerHTML =
                "<div class='result' data-recipe-id='" +
                result.id +
                "'><h1>" +
                result.title +
                "</h1><img src='" +
                res.baseUri +
                result.image +
                "' width='400'><div class='ready-in'>Ready in " +
                result.readyInMinutes +
                " minutes</div></div>";
            } else {
              console.error("No recipe found for query:", query);
            }
          },
          error: function (xhr, status, error) {
            console.error("Error fetching recipe:", error);
          },
        });
      }
    </script>
  </body>
</html>
